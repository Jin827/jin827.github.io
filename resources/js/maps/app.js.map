{"version":3,"sources":["app.js"],"names":["BACKEND_HOST","location","href","indexOf","setCookie","name","value","days","expires","Date","date","getTime","toUTCString","activeLang","/en","/kr","pathname","replace","language","navigator","userLanguage","split","cookieLanguage","parts","document","cookie","pop","shift","getCookie","browserLang","TxtType","toRotate","this","el","loopNum","period","parseInt","txt","tick","isDeleting","prototype","i","length","fullTxt","substring","innerHTML","that","delta","Math","random","setTimeout","window","onload","elements","getElementsByClassName","getAttribute","JSON","parse","css","createElement","type","body","appendChild","navIcon","querySelector","navTriangle","mainNav","addEventListener","e","preventDefault","classList","contains","remove","src","add","scriptEl","navbar","getElementById","aboutSection","mapEl","aboutPosition","offsetTop","mapPosition","imagesWasLoaded","googleMapsWasLoaded","pageYOffset","googleMap","lat","lng","zoom","google","maps","Map","center","montreal","position","title","v","getElementsByTagName","s","async","lazyLoadOptions","b","lazyLoadImages","linkedinInline","github","gitOutline","gitInline","linkedin","linkedinOutline","style","stroke","fill","btnToSubPortfolio","querySelectorAll","btnToMainPortfolio","showSubPortfolio","_this","id","filter","map","profileNum","hideSubPortfolio","btn","form","onsubmit","formContents","data","email","subject","message","stringify","url","reject","XMLHttpRequest","xhr","createCORSRequest","open","method","XDomainRequest","alert","status","response","resolve","Error","statusText","send","then","xhrPostRequest"],"mappings":"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","file":"../app.js","sourcesContent":["(function () {\n\n\t// if the url contains ?debug=true\n\tconst IS_DEBUG_MODE = !!~location.href.indexOf('localhost');\n\tconst BACKEND_HOST = IS_DEBUG_MODE ? 'http://localhost:9900' : 'https://jiah-lee.herokuapp.com';\n\n\t// Check the language\n\tfunction getCookie(name) {\n\t\tvar value = '; ' + document.cookie;\n\t\tvar parts = value.split('; ' + name + '=');\n\t\tif (parts.length == 2) return parts.pop().split(';').shift();\n\t}\n\n\tfunction setCookie(name,value,days) {\n\t\tvar expires = '';\n\t\tif (days) {\n\t\t\tvar date = new Date();\n\t\t\tdate.setTime(date.getTime() + (days*24*60*60*1000));\n\t\t\texpires = '; expires=' + date.toUTCString();\n\t\t}\n\t\tdocument.cookie = name + '=' + (value || '')  + expires + '; path=/';\n\t}\n\n\tconst activeLang = ({\n\t\t'/en': 'en',\n\t\t'/kr': 'kr'\n\t})[location.pathname.replace(/\\/$/, '')] || 'en';\n\n\tconst browserLang = (navigator.language || navigator.userLanguage).split('-')[0];\n\tconst cookieLanguage = getCookie('lang');\n\t// Browser language is different than the set language and the url\n\t// querystring does not have a lang parameter\n\n\tif (browserLang && !cookieLanguage) {\n\t\tsetCookie('lang', browserLang, 365);\n\t\treturn window.location = '/' + browserLang;\n\t}\n\n\t// The main index.html is in English\n\tsetCookie('lang', activeLang, 365);\n\tif (location.pathname === '/' && cookieLanguage !== 'en') {\n\t\treturn window.location = '/' + cookieLanguage;\n\t}\n\n\n\n\t/* --- Header Typewriting Animation --- */\n\tconst TxtType = function (el, toRotate, period) {\n\t\tthis.toRotate = toRotate;\n\t\tthis.el = el;\n\t\tthis.loopNum = 0;\n\t\tthis.period = parseInt(period, 10) || 2000;\n\t\tthis.txt = '';\n\t\tthis.tick();\n\t\tthis.isDeleting = false;\n\t};\n\n\tTxtType.prototype.tick = function () {\n\t\tlet i = this.loopNum % this.toRotate.length;\n\t\tlet fullTxt = this.toRotate[i];\n\n\t\tif (this.isDeleting) {\n\t\t\tthis.txt = fullTxt.substring(0, this.txt.length - 1);\n\t\t} else {\n\t\t\tthis.txt = fullTxt.substring(0, this.txt.length + 1);\n\t\t}\n\n\t\tthis.el.innerHTML = `<span class=\"wrap\">${this.txt}</span>`;\n\n\t\tconst that = this;\n\t\tlet delta = 200 - Math.random() * 100;\n\n\t\tif (this.isDeleting) {\n\t\t\tdelta /= 2;\n\t\t}\n\n\t\tif (!this.isDeleting && this.txt === fullTxt) {\n\t\t\tdelta = this.period;\n\t\t\tthis.isDeleting = true;\n\t\t} else if (this.isDeleting && this.txt === '') {\n\t\t\tthis.isDeleting = false;\n\t\t\tthis.loopNum++;\n\t\t\tdelta = 300;\n\t\t}\n\n\t\tsetTimeout(function () {\n\t\t\tthat.tick();\n\t\t}, delta);\n\t};\n\n\twindow.onload = function () {\n\t\tconst elements = document.getElementsByClassName('typewrite');\n\n\t\tfor (let i = 0; i < elements.length; i++) {\n\t\t\tlet toRotate = elements[i].getAttribute('data-type');\n\t\t\tlet period = elements[i].getAttribute('data-period');\n\t\t\tif (toRotate) {\n\t\t\t\tnew TxtType(elements[i], JSON.parse(toRotate), period);\n\t\t\t}\n\t\t}\n\n\t\t// INJECT CSS\n\t\tconst css = document.createElement('style');\n\t\tcss.type = 'text/css';\n\t\tcss.innerHTML = '.typewrite > .wrap { border-right: 0.04em solid #fff; }';\n\t\tdocument.body.appendChild(css);\n\t};\n\n\t/* --- Nav Icon & Toggle box --- */\n\tconst navIcon = document.querySelector('#js--nav-icon');\n\tconst navTriangle = document.querySelector('.main-nav--box--triangle-shape');\n\tconst mainNav = document.querySelector('.main-nav');\n\n\tconst navOpen = 'resources/assets/svg/icon/nav-open.svg';\n\tconst navClose = 'resources/assets/svg/icon/nav-close.svg';\n\n\tnavIcon.addEventListener('click', function (e) {\n\t\te.preventDefault();\n\n\t\tif (!mainNav.classList.contains('open')) {\n\t\t\tnavTriangle.classList.add('open');\n\t\t\tmainNav.classList.add('open');\n\t\t\tthis.src = navClose;\n\t\t} else {\n\t\t\tnavTriangle.classList.remove('open');\n\t\t\tmainNav.classList.remove('open');\n\t\t\tthis.src = navOpen;\n\t\t}\n\t}, false);\n\n\t/* --- Scroll Events --- */\n\tconst navbar = document.getElementById('nav-container');\n\tconst aboutSection = document.getElementById('about');\n\tconst mapEl = document.getElementById('map');\n\tconst aboutPosition = aboutSection.offsetTop;\n\tconst mapPosition = mapEl.offsetTop;\n\tlet imagesWasLoaded = false;\n\tlet googleMapsWasLoaded = false;\n\n\tfunction checkScrollPosition () {\n\t\tgetStickyNav();\n\n\t\tif (!googleMapsWasLoaded && (window.pageYOffset > mapPosition)) {\n\t\t\tloadGoogleMaps();\n\t\t\tgoogleMapsWasLoaded = true;\n\t\t}\n\n\t\tif (!imagesWasLoaded && (window.pageYOffset > aboutPosition)) {\n\t\t\tlazyLoadImages();\n\t\t\timagesWasLoaded = true;\n\t\t}\n\t}\n\n\n\n\tcheckScrollPosition();\n\n\t/* Sticky Nav */\n\tfunction getStickyNav() {\n\t\tif (window.pageYOffset > aboutPosition) {\n\t\t\tnavbar.classList.add('sticky');\n\t\t} else {\n\t\t\tnavbar.classList.remove('sticky');\n\t\t}\n\t}\n\n\t/* Lazyload Images */\n\tfunction lazyLoadImages() {\n\t\tconst b = document.getElementsByTagName('body')[0];\n\t\tconst s = document.createElement('script'); s.async = true;\n\t\tconst v = !('IntersectionObserver' in window) ? '8.8.0' : '10.9.0';\n\t\ts.src = 'https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/' + v + '/lazyload.min.js';\n\t\twindow.lazyLoadOptions = {};\n\t\tb.appendChild(s);\n\t}\n\n\t/* --- Map --- */\n\tfunction loadGoogleMaps () {\n\t\tconst scriptEl = document.createElement('script');\n\t\tscriptEl.src = 'https://maps.googleapis.com/maps/api/js?key=AIzaSyCwoUun1nhHQnZljKQmp4nEZP6-uw4L6xM';\n\t\tscriptEl.onload = function () {\n\t\t\tconst googleMap = document.getElementById('map');\n\n\t\t\tconst location = {\n\t\t\t\tmontreal: {\n\t\t\t\t\tlat: 45.5081804,\n\t\t\t\t\tlng: -73.57\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst map = new google.maps.Map(googleMap, {\n\t\t\t\tcenter: location.montreal,\n\t\t\t\tzoom: 11.5\n\t\t\t});\n\n\t\t\tnew google.maps.Marker({\n\t\t\t\tmap: map,\n\t\t\t\tposition: location.montreal,\n\t\t\t\ttitle: 'Montreal'\n\t\t\t});\n\t\t};\n\n\t\tdocument.body.appendChild(scriptEl);\n\t}\n\n\t/* --- Media icons hover effect --- */\n\tconst linkedin = document.querySelector('.icon-media--linkedin');\n\tconst linkedinOutline = document.getElementById('linkedin-outline');\n\tconst linkedinInline = document.getElementById('linkedin-inline');\n\tconst github = document.querySelector('.icon-media--github');\n\tconst gitOutline = document.getElementById('github-outline');\n\tconst gitInline = document.getElementById('github-inline');\n\n\tlinkedin.addEventListener('mouseover', function () {\n\t\tlinkedinOutline.style.stroke = '#0A278B';\n\t\tlinkedinInline.style.fill = '#0A278B';\n\t}, false);\n\n\tlinkedin.addEventListener('mouseleave', function () {\n\t\tlinkedinOutline.style.stroke = '#0077B5';\n\t\tlinkedinInline.style.fill = '#0077B5';\n\t}, false);\n\n\tgithub.addEventListener('mouseover', function () {\n\t\tgitOutline.style.stroke = '#EF0320';\n\t\tgitInline.style.fill = '#EF0320';\n\t}, false);\n\n\tgithub.addEventListener('mouseleave', function () {\n\t\tgitOutline.style.stroke = '#FB3C03';\n\t\tgitInline.style.fill = '#FB3C03';\n\t}, false);\n\n\n\t/* --- Sub Prtfolio --- */\n\tconst btnToSubPortfolio = document.querySelectorAll('.js--btn-to-sub');\n\tconst btnToMainPortfolio = document.querySelectorAll('.js--btn-to-main');\n\n\tbtnToSubPortfolio.forEach(btn => btn.addEventListener('click', showSubPortfolio, false));\n\tbtnToMainPortfolio.forEach(btn => btn.addEventListener('click', hideSubPortfolio, false));\n\n\tfunction showSubPortfolio(e) {\n\t\te.preventDefault();\n\t\tdocument.querySelector(`.main--${this.id}`).classList.add('fade');\n\t\tdocument.querySelector(`.sub--${this.id}`).classList.add('open');\n\n\t\tconst profileNum = [1, 3, 4, 5];\n\t\tprofileNum\n\t\t\t.filter(id => id != this.id)\n\t\t\t.map(id => {\n\t\t\t\tdocument.querySelector(`.main--${id}`).classList.remove('fade');\n\t\t\t\tdocument.querySelector(`.sub--${id}`).classList.remove('open');\n\t\t\t});\n\t}\n\n\tfunction hideSubPortfolio(e) {\n\t\te.preventDefault();\n\n\t\tdocument.querySelector(`.main--${this.id - 100}`).classList.remove('fade');\n\t\tdocument.querySelector(`.sub--${this.id - 100}`).classList.remove('open');\n\t}\n\n\t/* --- Contact --- */\n\tconst form = document.getElementById('contact-form');\n\tform.onsubmit = function (e) {\n\t\te.preventDefault();\n\n\t\tconst formContents = {\n\t\t\tname: form.name.value,\n\t\t\temail: form.email.value,\n\t\t\tsubject: form.subject.value,\n\t\t\tmessage: form.message.value\n\t\t};\n\t\tconst linkedin = 'https://www.linkedin.com/in/jiah827/';\n\t\txhrPostRequest(formContents)\n\t\t\t.then(form.innerHTML = `<P class=\"contact-message\">Hello ${form.name.value}, <br/>Your message has been sent.<br/> Thank you &#128420;</P>`)\n\t\t\t.then(form.reset())\n\t\t\t.catch(err => {\n\t\t\t\tconsole.error(`SendGrid API request failed: ${err}`);\n\t\t\t\tform.innerHTML = `<P class=\"contact-message\">I am sorry.<br/>Your message has NOT been sent.<br/> Please contact me via <a href=\"${linkedin}\">Linkedin</a>.<br/>Thank you &#128420;</P>`;\n\t\t\t});\n\n\t};\n\n\tfunction createCORSRequest(method, url) {\n\t\tlet xhr = new XMLHttpRequest();\n\t\tif ('withCredentials' in xhr) {\n\t\t\t// XHR for Chrome/Firefox/Opera/Safari.\n\t\t\txhr.open(method, url, true);\n\t\t} else if (typeof XDomainRequest != 'undefined') {\n\t\t\t// XDomainRequest for IE.\n\t\t\txhr = new XDomainRequest();\n\t\t\txhr.open(method, url);\n\t\t} else {\n\t\t\t// CORS not supported.\n\t\t\txhr = null;\n\t\t}\n\t\treturn xhr;\n\t}\n\n\tfunction xhrPostRequest(formContents) {\n\n\t\tconst data = JSON.stringify(formContents);\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst url = `${BACKEND_HOST}/api/contact`;\n\t\t\tconst xhr = createCORSRequest('POST', url);\n\n\t\t\tif (!xhr) {\n\t\t\t\talert('CORS not supported');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\txhr.onload = function () {\n\t\t\t\tif (this.status >= 200 && this.status < 300) {\n\t\t\t\t\tresolve(xhr.response);\n\t\t\t\t} else {\n\t\t\t\t\treject(Error(xhr.statusText));\n\t\t\t\t}\n\t\t\t};\n\t\t\txhr.onerror = function () {\n\t\t\t\treject(Error('Network Error'));\n\t\t\t\talert('Woops, there was an error making the request.');\n\t\t\t};\n\t\t\txhr.setRequestHeader('Content-type', 'application/json');\n\t\t\txhr.send(data);\n\t\t});\n\t}\n})();\n"]}